<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Audio Demo</title>
    <link rel="stylesheet" href="upload/bootstrap.css">
    <link rel="stylesheet" href="user-infinity.css">
    <style>
#myCanvas
{
    pointer-events: none;       /* make the canvas transparent to the mouse - needed since canvas is position infront of image */
    position:absolute;
    z-index: 2;
}


    </style>
    <script>
        function dummy(){console.log("dummy");}
    </script>
    <script type="text/javascript" src="howler/howler.js/dist/howler.js"></script>
    <script type="text/javascript" src="user-infinity.js"></script>
    <script>
        
        async function doplay() {
            console.log("doplay");
            
            loadJSON('json/8.json',
                function(audio_files) { //console.log(audio_files); 
                    
                    var chosen = getNRandSorted(audio_files, 5);
                    var sounds = [];
                    var howl;
                    
                    chosen.forEach(element => {
                        howl = await new Howl ({ src: "processed_audio/" + [element[2] + "/" + element[4]] });
                        sounds.push(howl);
                    });
                    /*
                    var sleeptime = 20;
                    sounds.forEach(element =>{
                        await sleep(sleeptime);
                        //element.play();
                        sleeptime = rrand(200, 3000);
                    })
                    */
                }, 
                function(xhr) { console.error(xhr); }
            );
            
        }
        
        function play_stuff(){
            doplay().then(
                function(value) { console.log("playing"); },
                function(error) { /* code if some error */ }
            );
        }

        
    </script>
</head>
<body  onload="play_stuff();">
    <div class="page-header">
        <h1>Audio Demo</h1>
    </div>
</body>
</html>